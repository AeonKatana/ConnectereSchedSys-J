<!DOCTYPE html>
<html lang="en" class="hihi">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <title>ConnectereHub</title>

</head>
<body class="hehe">




<form class="frm" id="addform">
	
    <div class="inside">
    <input type="text" class="form-control" id="title" placeholder="Task title" required>
        <input type="text" class="form-control" id="detail" placeholder="Describe Task" required>  
        <br>
 <div class="form-group">
   	<label>Recurring : </label>
    		<input type="radio" id="radio1" class="form-check-input" name="variation" value="true">
    		<label class="form-check-label"  for="radio1" >Yes</label>
			<input type="radio" id="radio2" class="form-check-input" name="variation" checked="checked" value="false">
			<label class="form-check-label" for="radio2">No</label>
    </div>
    <div class="form-group row">
        <label for="" class="col-sm-1 col-form-label">Until</label>
        <div class="grp col-sm-10">
        <input type="date" class="form-control" name="date" placeholder="Select Date" id="date" disabled required>
        </div>
    </div>
   
    <div class="form-group row">
        <label for="" class="col-sm-1 col-form-label">Note</label>
        <div class="grp col-sm-10">
        <input type="text" class="form-control" id="note" placeholder="Add extra details (optional)">
        </div>
    </div>

    <button type="submit" class="addtask"> Add this task</button>
    <button type="button" class="btncancel" >  Cancel</button>

</div>
</form>

 






<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    var el = document.getElementById("wrapper");
    var toggleButton = document.getElementById("menu-toggle");

    toggleButton.onclick = function () {
        el.classList.toggle("toggled");
    };
  
</script>
<script type="text/javascript">
$(document).ready(function(){
	
	$("#radio1").click(function(){
		
		$("#date").prop("disabled",false);
	});
	
	$("#radio2").click(function(){
		$("#date").prop("disabled",true);
	});
	
	$(".btncancel").click(function(){
		$("#radio2").attr("checked", true);
		$(this).parent().parent().parent().remove();
		window.parent.document.getElementById('framebtn').removeAttribute("disabled");
		window.parent.document.getElementById('myframe').setAttribute("height", 0);
	});
	
	
	
	
	
	// HTTP Requests
	
	$("#addform").submit(function(e){
		e.preventDefault();
	
		var task = {};
		task['title'] = $("#title").val();
		task['taskdetail'] = $("#detail").val();
		task['recurring'] = $("input[name='variation']:checked").val();
		task['until'] = $("#date").val();
		task['note'] = $("#note").val();
	
		
		$.ajax({
			type : "POST",
			url : "/task/savemytask",
			contentType : "application/json",
			data : JSON.stringify(task),
			success: function(result){
				parent.location.reload();
				$("#addform").parent().parent().remove();	
				alert("Task Added!");
			}
		})
		
	});
	
	
});

</script>

</body>
</html>